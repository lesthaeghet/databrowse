<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dbdg="http://thermal.cnde.iastate.edu/databrowse/dataguzzler" xmlns:dg="http://thermal.cnde.iastate.edu/dataguzzler" match="dbdg:dbdg" mode="full">
	<xsl:element name="script">
    	<xsl:attribute name="type">text/javascript</xsl:attribute>
    	<xsl:attribute name="src"><xsl:value-of select="@resurl"/>/prettify/prettify.js</xsl:attribute>
    </xsl:element>
    <xsl:element name="link">
    	<xsl:attribute name="type">text/css</xsl:attribute>
    	<xsl:attribute name="rel">stylesheet</xsl:attribute>
    	<xsl:attribute name="href"><xsl:value-of select="@resurl"/>/prettify/prettify.css</xsl:attribute>
    </xsl:element>
    <style>
        .dgcode {
            white-space: pre-wrap;
            white-space: -moz-pre-wrap;
            white-space: -pre-wrap;
            white-space: -o-pre-wrap;
            word-wrap: break-word;
            max-width: 555px;
        }
        #wfmlist {
            font-size: small;
            width: 100%;
        }
        #wfmlist li {
            overflow:auto;
            display:inline-block; 
            list-style-type:none; 
            width:120px;
            float: left;
        }
    </style>
    <script type="text/javascript" defer="true">
        <![CDATA[
            $(document).ready(function() {
                prettyPrint();
            });         
        ]]>
    </script>
    <table class="cream full-width">
        <thead>
            <th style="width:8px">
                <img><xsl:attribute name="src"><xsl:value-of select="@resurl"/>/icons/<xsl:value-of select="@icon"/></xsl:attribute></img>
            </th>
            <th colspan="2" style="word-wrap: break-word">
                <span style="width:665px;display:inline-block"><xsl:value-of select="@name"/></span>
                <a>
                    <xsl:attribute name="href"><xsl:value-of select="@downlink"/></xsl:attribute>
                    <img><xsl:attribute name="src"><xsl:value-of select="@resurl"/>/icons/save.png</xsl:attribute></img>
                </a>
            </th>
        </thead>
    </table>
    <xsl:apply-templates/>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:dg="http://thermal.cnde.iastate.edu/dataguzzler" match="dg:SNAPSHOT">
    <h2>Dataguzzler Snapshot Summary</h2>
    <h5>Jump To:</h5>
    <ul id="wfmlist">
        <xsl:for-each select="dg:GUZZNWFM">
            <xsl:sort data-type="text" select="dg:WAVENAME"/>
            <li><a><xsl:attribute name="href">#<xsl:value-of select="dg:WAVENAME"/></xsl:attribute><xsl:value-of select="dg:WAVENAME"/></a></li>
        </xsl:for-each>
    </ul>
    <p>&#160;<br/></p>
    <p><h3>Waveform List</h3></p>
    <xsl:apply-templates/>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:dg="http://thermal.cnde.iastate.edu/dataguzzler" match="dg:GUZZNWFM">
    <table class="cream full-width">
        <thead>
            <tr>
                <th style="width:144px">Waveform Name:</th>
                <td><a><xsl:attribute name="name"><xsl:value-of select="dg:WAVENAME"/></xsl:attribute><xsl:value-of select="dg:WAVENAME"/></a></td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Waveform Size:</th>
                <td><xsl:value-of select="dg:GUZZWFMD/dg:DATARRYF"/></td>
            </tr>
            <tr>
                <th>Dimensions:</th>
                <td><xsl:value-of select="dg:GUZZWFMD/dg:WFMDIMNS"/></td>
            </tr>
            <xsl:for-each select="dg:GUZZWFMD/dg:METADATA/dg:METDATUM">
                <xsl:sort select="dg:METDNAME"/>
                <tr>
                    <th><xsl:value-of select="dg:METDNAME"/>:</th>
                    <td>
                        <xsl:choose>
                            <xsl:when test="dg:METDNAME/. = 'ProcExpr' or dg:METDNAME/. = 'ProcRGBA' or dg:METDNAME/. = 'ProcMD'">
                                <pre class="prettyprint dgcode">
                                    <xsl:value-of select="dg:METDNAME/following-sibling::dg:*"/>
                                </pre>
                            </xsl:when>
                            <xsl:otherwise>
                                <xsl:value-of select="dg:METDNAME/following-sibling::dg:*"/>
                            </xsl:otherwise>
                        </xsl:choose>
                    </td>
                </tr>
            </xsl:for-each>
        </tbody>
    </table>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:dg="http://thermal.cnde.iastate.edu/dataguzzler" match="dg:*">
    <xsl:apply-templates/>
</xsl:template>